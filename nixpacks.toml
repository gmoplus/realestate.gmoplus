# Flynax Real Estate - Coolify/Nixpacks Configuration
# PHP Built-in Server kullanarak çalışır (en güvenilir yöntem)

[phases.setup]
nixPkgs = [
    "php83",
    "php83Extensions.mbstring",
    "php83Extensions.gd",
    "php83Extensions.pdo",
    "php83Extensions.pdo_mysql",
    "php83Extensions.mysqli",
    "php83Extensions.zip",
    "php83Extensions.curl",
    "php83Extensions.xml",
    "php83Extensions.bcmath",
    "php83Extensions.intl",
    "php83Extensions.opcache",
    "mariadb-client"
]

[phases.build]
cmds = [
    "mkdir -p tmp/compile tmp/cache tmp/upload files plugins",
    "chmod -R 777 tmp files plugins",
    "rm -f tmp/compile/*.php"
]

[start]
cmd = "php -S 0.0.0.0:${PORT:-80} -t /app /app/router.php"
